<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Estado de vuelo - SKAIRO</title>

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body{
            font-family:"Nunito",sans-serif;
            background:#eef4ff;
        }
        .header{
            height:85px;
            background:white;
            box-shadow:0 4px 20px rgba(0,0,0,0.08);
            position:sticky;
            top:0;
            z-index:50;
        }
        .navbar{
            max-width:1200px;
            margin:auto;
            height:100%;
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:0 1.5rem;
        }
        .logo{
            font-size:1.9rem;
            font-weight:800;
            color:#592385;
            letter-spacing:-1px;
        }
        .nav-links a{
            margin-left:25px;
            font-weight:600;
            color:#592385;
            text-decoration:none;
            transition:.2s;
        }
        .nav-links a:hover{ color:#34115b; }

        .page-title{
            text-align:center;
            margin-top:40px;
            font-size:2.3rem;
            font-weight:800;
            color:#592385;
        }

        .search-card{
            max-width:430px;
            margin:30px auto;
            padding:25px;
            background:white;
            border-radius:20px;
            box-shadow:0 8px 20px rgba(0,0,0,0.1);
        }

        .result-card{
            max-width:1100px;
            margin:30px auto;
            padding:25px;
            background:white;
            border-radius:20px;
            box-shadow:0 8px 20px rgba(0,0,0,0.1);
        }

        .btn-skairo{
            background:#592385;
            color:white !important;
            font-weight:800;
            padding:12px 30px;
            border-radius:14px;
            text-decoration:none;
            box-shadow:0 4px 10px rgba(0,0,0,0.15);
            transition:0.25s;
            display:inline-block;
        }
        .btn-skairo:hover{
            background:#441b6d;
            transform:translateY(-2px);
        }

        .btn-outline-skairo{
            border:2px solid #592385;
            color:#592385 !important;
            font-weight:800;
            padding:12px 30px;
            border-radius:14px;
            text-decoration:none;
            background:white;
            transition:0.25s;
            display:inline-block;
        }
        .btn-outline-skairo:hover{
            background:#f0e6ff;
            transform:translateY(-2px);
        }
    </style>
</head>
<body>

<header class="header">
    <nav class="navbar">
        <div class="logo">SKAIRO</div>
        <div class="nav-links">
            <a href="{{ url_for('index') }}">Inicio</a>
            <a href="{{ url_for('estado_vuelo') }}">Estado de vuelo</a>
        </div>
    </nav>
</header>

<h1 class="page-title">Estado de vuelo / reservas</h1>

<!-- buscar x dni -->
<div class="search-card">
    <h5 class="fw-bold mb-3" style="color:#592385;">Por DNI pasajero</h5>
    <form method="post">
        <input type="hidden" name="tipo_busqueda" value="dni">
        <input type="text" name="valor" class="form-control mb-3" placeholder="Ej: 73037034" required>
        <button class="btn-skairo w-100" type="submit">Buscar</button>
    </form>
</div>

<!-- results -->
{% if criterio %}
<div class="result-card">

    <h5 class="fw-bold mb-3" style="color:#592385;">
        Resultados para DNI: {{ valor }}
    </h5>

    {% if reservas and reservas|length > 0 %}
    <div class="table-responsive mt-3">
        <table class="table table-sm table-striped align-middle">
            <thead class="table-light">
                <tr>
                    <th>PNR</th>
                    <th>Pasajero</th>
                    <th>DNI</th>
                    <th>Vuelo</th>
                    <th>Ruta</th>
                    <th>Fecha reserva</th>
                    <th>Estado</th>
                    <th>Total (S/.)</th>
                </tr>
            </thead>
            <tbody>
            {% for r in reservas %}
                <tr>
                    <td>{{ r.codigo_pnr }}</td>
                    <td>{{ r.pasajero.nombres }} {{ r.pasajero.apellidos }}</td>
                    <td>{{ r.pasajero.dni }}</td>
                    <td>{{ r.vuelo.numero_vuelo }}</td>
                    <td>{{ r.vuelo.origen }} â†’ {{ r.vuelo.destino }}</td>
                    <td>{{ r.fecha_reserva }}</td>
                    <td>{{ r.estado }}</td>
                    <td>{{ r.total_reserva }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="mt-3 text-muted">No se encontraron reservas para este DNI.</p>
    {% endif %}
</div>
{% endif %}

<div class="text-center mt-5 mb-5">

    <a href="{{ url_for('reservas') }}" class="btn-skairo me-3">
        Registrar vuelo
    </a>

    <a href="{{ url_for('index') }}" class="btn-outline-skairo">
        Volver al inicio
    </a>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>